[platformio]

[env]
platform = espressif32 @ ^6.5.0
board = esp32dev
framework = arduino
monitor_speed = 115200
upload_speed = 921600
board_build.filesystem = spiffs
lib_ldf_mode = chain+

[env:esp32dev-transmitter]
build_src_filter = -<*> +<transmitter/*>

[env:esp32dev-receiver]
build_src_filter = -<*> +<receiver/*>
lib_deps =
  bodmer/TFT_eSPI @ ^2.5.0
  lvgl/lvgl @ ^8.3.11

; Complete build flags for LVGL + ST7789 setup
build_flags =
  -D USER_SETUP_LOADED=1
  -D ST7789_DRIVER=1
  ; ST7789 Pin Assignments for ESP32 Display Board
  -D TFT_CS=15
  -D TFT_DC=2
  -D TFT_SCLK=14
  -D TFT_MOSI=13
  -D TFT_MISO=12
  -D TFT_RST=-1
  -D TFT_BL=27
  ; Touch Screen Pin Assignments
  -D TOUCH_CS=33
  ; Font loading
  -D LOAD_GLCD=1
  -D LOAD_FONT2=1
  -D LOAD_FONT4=1
  -D LOAD_GFXFF=1
  ; SPI Frequencies optimized for ST7789
  -D SPI_FREQUENCY=40000000
  -D SPI_READ_FREQUENCY=20000000
  -D SPI_TOUCH_FREQUENCY=2500000
  ; LVGL Configuration
  -D LV_CONF_INCLUDE_SIMPLE=1
  -D LV_COLOR_DEPTH=16
  -D LV_MEM_SIZE=16384

; Minimal test environment - super simple blinking test
[env:minimal-test]
build_src_filter = -<*> +<test_minimal/*>
lib_deps =
  bodmer/TFT_eSPI @ ^2.5.0
build_flags =
  -D USER_SETUP_LOADED=1
  -D ST7789_DRIVER=1
  -D TFT_CS=15
  -D TFT_DC=2
  -D TFT_SCLK=14
  -D TFT_MOSI=13
  -D TFT_MISO=12
  -D TFT_RST=-1
  -D TFT_BL=27
  -D TOUCH_CS=33
  -D LOAD_GLCD=1
  -D LOAD_FONT2=1
  -D LOAD_FONT4=1
  -D LOAD_GFXFF=1
  -D SPI_FREQUENCY=40000000
  -D SPI_READ_FREQUENCY=20000000
  -D SPI_TOUCH_FREQUENCY=2500000